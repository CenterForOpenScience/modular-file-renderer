<!DOCTYPE html>

<!--  
   GLmol - Molecular Viewer on WebGL/Javascript 

   (C) Copyright 2011, biochem_fan

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

    This program uses
      Three.js 
         https://github.com/mrdoob/three.js
         Copyright (c) 2010-2011 three.js Authors. All rights reserved.
      jQuery
         http://jquery.org/
         Copyright (c) 2011 John Resig
-->

<html>
<head>
 <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, target-densitydpi=device-dpi">

 <meta charset="utf-8">
 
 <title>GLmol embedding examples</title>
 <style type="text/css">
 </style>
</head>

<body>
<h1>GLmol embedding examples</h1>
<p>You can embed multiple instances of GLmol in a page. Molecular representations can be customized by Javascript. For the details, please examine the source code of this page. If it is not clear, don't hesitate to ask me (biochem_fan at users.sourceforge.jp).</p>

<p>Rotation: left button, Translation: middle button or Ctrl-key + left button, Zoom: Wheel or right button(up/down) or Shift-key + left button(up/down)</p>

<h2>Embedding Protein with customized representation</h2>

<p>The following model is horse deoxyhaemoglobin(Adapted from PDB <a href="http://www.rcsb.org/pdb/explore/explore.do?structureId=2dhb">2DHB</a>).</p>

<p>The Iron atom (colored <span style="color: #cc7722">ocher</span>) is coordinated by five nitrogen atoms (colored <span style="color: #0000ff">blue</span>); four from a heme and one from a histidine residue in the protein. When oxidized, an oxygen molecule binds at the opposite side of the histidine as another axial ligand.</p>

<div id="glmol01" style="width: 500px; height: 400px; background-color: black;"></div> <textarea id="glmol01_src" style="display: none;"></textarea>

<p>WARNING: This example loads a PDB file located on this server by
XmlHttpRequest. Due to
the <a href="http://en.wikipedia.org/wiki/Same_origin_policy">same-origin-policy</a>,
this example will not work when saved to your local disk. GLmol can
load coordinate files located on the same Web server (not local
filesystem) as the HTML itself or Ajax-enabled servers (like PubChem,
RCSB PDB).</p>

<h2>Embedding small molecule</h2>
<p>The following molecule is triiodothyroxine. </p>

<div id="glmol02" style="width: 300px; height: 200px; background-color: black;"></div> <textarea id="glmol02_src" style="display: none;">
HETATM    1  C                  -3.450  -0.135   0.363
HETATM    2  C                  -2.116  -0.033  -0.019
HETATM    3  C                  -1.805   0.087  -1.347
HETATM    4  C                  -2.806   0.106  -2.304
HETATM    5  C                  -4.116   0.005  -1.917
HETATM    6  C                  -4.463  -0.118  -0.575
HETATM    7  I                  -3.911  -0.321   2.435
HETATM    8  H                  -1.346  -0.049   0.721
HETATM    9  O                  -0.495   0.197  -1.832
HETATM   10  H                  -2.532   0.201  -3.333
HETATM   11  H                  -4.910   0.017  -2.633
HETATM   12  O                  -5.799  -0.212  -0.300
HETATM   13  C                   0.605   0.190  -1.001
HETATM   14  C                   2.873   0.179   0.629
HETATM   15  C                   2.242   1.367   0.305
HETATM   16  C                   1.117   1.375  -0.504
HETATM   17  C                   1.244  -1.002  -0.684
HETATM   18  C                   2.366  -1.011   0.121
HETATM   19  C                   4.099   0.189   1.522
HETATM   20  H                   2.619   2.294   0.684
HETATM   21  I                   0.214   3.227  -1.019
HETATM   22  I                   0.527  -2.833  -1.490
HETATM   23  H                   2.873  -1.924   0.340
HETATM   24  H                  -6.001  -0.299   0.639
HETATM   25  H                   3.926  -0.412   2.407
HETATM   26  H                   4.290   1.203   1.851
HETATM   27  C                   5.361  -0.378   0.815
HETATM   28  C                   6.589   0.047   1.611
HETATM   29  H                   5.421   0.038  -0.183
HETATM   30  N                   5.273  -1.832   0.729
HETATM   31  O                   6.865   1.378   1.588
HETATM   32  O                   7.254  -0.704   2.264
HETATM   33  H                   6.356   1.896   0.955
HETATM   34  H                   5.561  -2.266   1.590
HETATM   35  H                   5.779  -2.220  -0.046
CONECT    1    2    6    7
CONECT    2    1    3    8
CONECT    3    2    4    9
CONECT    4    3    5   10
CONECT    5    4    6   11
CONECT    6    1    5   12
CONECT    7    1
CONECT    8    2
CONECT    9    3   13
CONECT   10    4
CONECT   11    5
CONECT   12    6   24
CONECT   13    9   16   17
CONECT   14   15   18   19
CONECT   15   14   16   20
CONECT   16   13   15   21
CONECT   17   13   18   22
CONECT   18   14   17   23
CONECT   19   14   25   26   27
CONECT   20   15
CONECT   21   16
CONECT   22   17
CONECT   23   18
CONECT   24   12
CONECT   25   19
CONECT   26   19
CONECT   27   19   28   29   30
CONECT   28   27   31   32
CONECT   29   27
CONECT   30   27   34   35
CONECT   31   28   33
CONECT   32   28
CONECT   33   31
CONECT   34   30
CONECT   35   30
END
</textarea>

<script src="js/jquery-1.7.min.js"></script>
<script src="js/Three49custom.js"></script>
<script type="text/javascript" src="js/GLmol.js"></script>
<script type="text/javascript">

// Small molecules can be embedded in the page

var glmol02 = new GLmol('glmol02');

// Proteins can also be embedded in the page but 
//  you might want to keep it separate.

var glmol01 = new GLmol('glmol01', true);
glmol01.defineRepresentation = function() {
   var all = this.getAllAtoms();
   var hetatm = this.removeSolvents(this.getHetatms(all));
   this.colorByAtom(all, {});
   this.colorByChain(all);
   var asu = new THREE.Object3D();
   
   this.drawBondsAsStick(asu, hetatm, this.cylinderRadius, this.cylinderRadius);
   this.drawBondsAsStick(asu, this.getResiduesById(this.getSidechains(this.getChain(all, ['A'])), [58, 87]), this.cylinderRadius, this.cylinderRadius);
   this.drawBondsAsStick(asu, this.getResiduesById(this.getSidechains(this.getChain(all, ['B'])), [63, 92]), this.cylinderRadius, this.cylinderRadius);
   this.drawCartoon(asu, all, this.curveWidth, this.thickness);

   this.drawSymmetryMates2(this.modelGroup, asu, this.protein.biomtMatrices);
   this.modelGroup.add(asu);
};

$.get("2DHB.pdb", function(ret) {
$("#glmol01_src").val(ret);
glmol01.loadMolecule();
});
</script>

<hr style="clear: both;">
<p><a href="http://sourceforge.jp/"><img src="http://sourceforge.jp/sflogo.php?group_id=6386&type=1" width="96" height="31" border="0" alt="SourceForge.JP"></a>
<br>(C) Copyright 2011 biochem_fan (biochem_fan at users.sourceforge.jp). <br>
This program is released under LGPL3.</p>
</body></html>
