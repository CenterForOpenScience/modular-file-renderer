'use strict';var PDFFindBar={opened:false,bar:null,toggleButton:null,findField:null,highlightAll:null,caseSensitive:null,findMsg:null,findStatusIcon:null,findPreviousButton:null,findNextButton:null,initialize:function(a){if(typeof PDFFindController==='undefined'||PDFFindController===null)throw 'PDFFindBar cannot be initialized '+'without a PDFFindController instance.';this.bar=a.bar;this.toggleButton=a.toggleButton;this.findField=a.findField;this.highlightAll=a.highlightAllCheckbox;this.caseSensitive=a.caseSensitiveCheckbox;this.findMsg=a.findMsg;this.findStatusIcon=a.findStatusIcon;this.findPreviousButton=a.findPreviousButton;this.findNextButton=a.findNextButton;var b=this;this.toggleButton.addEventListener('click',function(){b.toggle();});this.findField.addEventListener('input',function(){b.dispatchEvent('');});this.bar.addEventListener('keydown',function(a){switch(a.keyCode){case 13:if(a.target===b.findField)b.dispatchEvent('again',a.shiftKey);break;case 27:b.close();break;}});this.findPreviousButton.addEventListener('click',function(){b.dispatchEvent('again',true);});this.findNextButton.addEventListener('click',function(){b.dispatchEvent('again',false);});this.highlightAll.addEventListener('click',function(){b.dispatchEvent('highlightallchange');});this.caseSensitive.addEventListener('click',function(){b.dispatchEvent('casesensitivitychange');});},dispatchEvent:function(a,b){var c=document.createEvent('CustomEvent');c.initCustomEvent('find'+a,true,true,{query:this.findField.value,caseSensitive:this.caseSensitive.checked,highlightAll:this.highlightAll.checked,findPrevious:b});return window.dispatchEvent(c);},updateUIState:function(a,b){var c=false;var d='';var e='';switch(a){case FindStates.FIND_FOUND:break;case FindStates.FIND_PENDING:e='pending';break;case FindStates.FIND_NOTFOUND:d=mozL10n.get('find_not_found',null,'Phrase not found');c=true;break;case FindStates.FIND_WRAPPED:if(b)d=mozL10n.get('find_reached_top',null,'Reached top of document, continued from bottom');else d=mozL10n.get('find_reached_bottom',null,'Reached end of document, continued from top');break;}if(c)this.findField.classList.add('notFound');else this.findField.classList.remove('notFound');this.findField.setAttribute('data-status',e);this.findMsg.textContent=d;},open:function(){if(!this.opened){this.opened=true;this.toggleButton.classList.add('toggled');this.bar.classList.remove('hidden');}this.findField.select();this.findField.focus();},close:function(){if(!this.opened)return;this.opened=false;this.toggleButton.classList.remove('toggled');this.bar.classList.add('hidden');PDFFindController.active=false;},toggle:function(){if(this.opened)this.close();else this.open();}};